{include="header"}
{if="$fsc->cheque"}


<script type="text/javascript">
       
  function comprobar_url1()
   {
      if(window.location.hash.substring(1) == 'estudio')
      {
          //alert('carga 2')
         $('#tabs_plan a[href="#estudio"]').tab('show');
      }
      else if(window.location.hash.substring(1) == 'hijo')
      {
           //alert('carga 3')
         $('#tabs_plan a[href="#hijo"]').tab('show');
      }    
      else if(window.location.hash.substring(1) == 'riesgo')
      {
           //alert('carga 3')
         $('#tabs_plan a[href="#riesgo"]').tab('show');
      } 
   }
   
   $(document).ready(function() {       
       comprobar_url1();                   
       $("#b_veradjunto").click(function(event) {
            event.preventDefault();
            bootbox.confirm({
                message: '¿Realmente desea eliminar el Item?',
                title: '<b>Atención</b>',
                callback: function(result) {
                    if (result) {
                        window.location.href = '{$fsc->url()}&veradjunto='+id;
                    }
                }
            });
        });
      $("#b_imagen").click(function (event) {
        event.preventDefault();
        $("#modal_articulo_imagen").modal('show');
    });
    
    $("#b_delete_").click(function (event) {
          event.preventDefault();
          bootbox.confirm({
             message: '¿Realmente desea eliminar Tarjeta Y sus Recargas?',
             title: '<b>Atención</b>',
             callback: function(result) {
                if (result) {
                   window.location.href = '{$fsc->ppage->url()}&delete={$fsc->cheque->nrocheque}';
                }
             }
          });
       });
    
    //PARA LLAMAR CARGA DE NUEVO ESTACIONAMIENTO
        $("#b_nuevo_estacionamiento").click(function(event) {
         event.preventDefault();
         $("#modal_nuevo_estacionamiento").modal('show');
         document.f_nuevo_estacionamiento.varea.focus();
         }); 
         
     //PARA LLAMAR CARGA DE NUEVO GENERADORES
        $("#b_nuevo_generador").click(function(event) {
         event.preventDefault();
         $("#modal_nuevo_generador").modal('show');
         document.f_nuevo_generador.vdescripcion.focus();
         });     
         
         //PARA LLAMAR CARGA DE NUEVO CARGA OCUPACIONAL
        $("#b_nueva_cargaocupacional").click(function(event) {
         event.preventDefault();
         $("#modal_nueva_cargaocupacional").modal('show');
         document.f_nueva_cargaocupacional.vbloque.focus();
         });   
         
          //PARA LLAMAR CARGA DE NUEVO CARGA AMENAZA
        $("#b_nueva_amenaza").click(function(event) {
         event.preventDefault();
         $("#modal_nueva_amenaza").modal('show');
         document.f_nueva_amenaza.vamenaza.focus();
         });   
         
    
   });   
                        
   function importardatosmapasector(redir)
   {
      $("#b_importar").prop('disabled', true);
      $("#b_importar").prop('disabled', true);
      var continuar = true;            
             ///PARA VERIFICAR SI SE HA SELECCIONADO UN ARCHIVO PORQUE SI HAGO EN EL CONTRALADOR ME RECARGA TODO Y LIMPIA LO CARGADO;
            if( $("#vmapasector").val() == '' )
            {
               bootbox.alert({
                  message: 'No has seleccionado ningun archivo pdf ',
                  title: "<b>Atención</b>"
               });
               continuar = false;
                $("#b_importar").prop('disabled', false);
               //break;
               return;
            }
            //VERIFICAR QUE SE EXTENSION CSV EL ARCHIVO SELECCIONADO
            var extesion = $("#vmapasector").val().substring($("#vmapasector").val().indexOf('.')+1,$("#vmapasector").val().length);
            if( extesion.toUpperCase()  != 'PDF' )
            {
               bootbox.alert({
                  message: 'Debe seleccionar archivo con extensión pdf ' ,
                  title: "<b>Atención</b>"
               });
               continuar = false;
                $("#b_importar").prop('disabled', false);
               return;
               //break;
            }                     
      if( !continuar )
      {
         $("#b_importar").prop('disabled', false);
         $("#b_importar").prop('disabled', false);
      } else{
        if(redir)
            {
               document.f_plan1.redir.value = 'TRUE';
            }
               
            document.f_plan1.adjuntar.value = true;
            document.f_plan1.submit();
            
         }
   }
   
    function importardatoorganigrama(redir)
   {
      $("#b_importarorganigrama").prop('disabled', true);
      $("#b_importarorganigrama").prop('disabled', true);
      var continuar = true;            
             ///PARA VERIFICAR SI SE HA SELECCIONADO UN ARCHIVO PORQUE SI HAGO EN EL CONTRALADOR ME RECARGA TODO Y LIMPIA LO CARGADO;
            if( $("#vorganigrama").val() == '' )
            {
               bootbox.alert({
                  message: 'No has seleccionado ningun archivo pdf ',
                  title: "<b>Atención</b>"
               });
               continuar = false;
                $("#b_importarorganigrama").prop('disabled', false);
               //break;
               return;
            }
            //VERIFICAR QUE SE EXTENSION CSV EL ARCHIVO SELECCIONADO
            var extesion = $("#vorganigrama").val().substring($("#vorganigrama").val().indexOf('.')+1,$("#vorganigrama").val().length);
            if( extesion.toUpperCase()  != 'PDF' )
            {
               bootbox.alert({
                  message: 'Debe seleccionar archivo con extensión pdf ' ,
                  title: "<b>Atención</b>"
               });
               continuar = false;
                $("#b_importarorganigrama").prop('disabled', false);
               return;
               //break;
            }                     
      if( !continuar )
      {
         $("#b_importarorganigrama").prop('disabled', false);
         $("#b_importarorganigrama").prop('disabled', false);
      } else{
        if(redir)
            {
               document.f_plan1.redir.value = 'TRUE';
            }
               
            document.f_plan1.adjuntar.value = true;
            document.f_plan1.submit();
            
         }
   }
   
   
   function ver_adjunto(id)
   {
        window.location.href = '{$fsc->url()}&veradjunto='+id;
   }
   
   function eliminar_adjunto(id)
   {
      bootbox.confirm({
         message: '¿Realmente desea eliminar el archivo adjunto Nro. : #'+id+'?',
         title: '<b>Atención</b>',
         callback: function(result) {
            if (result) {
               window.location.href = '{$fsc->url()}&eliminaradjunto='+id+'#estudio';
            }
         }
      });
   }
   
   function eliminar_adjuntoorganigrama(id)
   {
      bootbox.confirm({
         message: '¿Realmente desea eliminar el archivo adjunto Nro. : #'+id+'?',
         title: '<b>Atención</b>',
         callback: function(result) {
            if (result) {
               window.location.href = '{$fsc->url()}&eliminaradjuntoorganigrama='+id+'#estudio';
            }
         }
      });
   }
   
   function eliminar_estacionamiento(id)
   {
      bootbox.confirm({
         message: '¿Realmente desea eliminar el estacionameinto Nro. : #'+id+'?',
         title: '<b>Atención</b>',
         callback: function(result) {
            if (result) {
               window.location.href = '{$fsc->url()}&eliminarestacionamiento='+id+'#estudio';
            }
         }
      });
   }
     
   function eliminar_generadores(id)
   {
      bootbox.confirm({
         message: '¿Realmente desea eliminar el generador Nro. : #'+id+'?',
         title: '<b>Atención</b>',
         callback: function(result) {
            if (result) {
               window.location.href = '{$fsc->url()}&eliminargenerador='+id+'#estudio';
            }
         }
      });
   } 
   function eliminar_contingencia(id)
   {
      bootbox.confirm({
         message: '¿Realmente desea eliminar el Contingencia Nro. : #'+id+'?',
         title: '<b>Atención</b>',
         callback: function(result) {
            if (result) {
               window.location.href = '{$fsc->url()}&eliminarcontingencia='+id+'#hijo';
            }
         }
      });
   } 
   
   function eliminar_amenaza(id)
   {
      bootbox.confirm({
         message: '¿Realmente desea eliminar el Amenaza Nro. : #'+id+'?',
         title: '<b>Atención</b>',
         callback: function(result) {
            if (result) {
               window.location.href = '{$fsc->url()}&eliminaramenza='+id+'#hijo';
            }
         }
      });
   } 
   
   
      
      
</script>

<div class="container-fluid">
    
        <div class="row">
            <div class="col-xs-3">
                <div class="btn-group">
                    <a id="b_nuevo_almacen" class="btn btn-sm btn-default" href="index.php?page=cheque">
                        <span class="glyphicon glyphicon-arrow-left"></span>
                        <span class="hidden-xs">&nbsp; Atras</span>
                    </a>
                    <a class="btn btn-sm btn-default" href="{$fsc->url()}" title="Recargar la página">
                        <span class="glyphicon glyphicon-refresh"></span>
                    </a>                   
                </div>
                <div class="btn-group">
                    {loop="$fsc->extensions"}
                    {if="$value->type=='button'"}
                    <a href="index.php?page={$value->from}{$value->params}" class="btn btn-sm btn-default">{$value->text}</a>
                    {/if}
                    {/loop}
                </div>
            </div>
            <div class="col-xs-6 text-center">
                <h2 style="margin-top: 0px;">Cheques</h2>
            </div>
            
             <div class="col-xs-3 text-right">                
                {if="$fsc->allow_delete"}
                <a href="#" style="margin-right: 15px;" id="b_delete_" class="btn btn-sm btn-danger">
                   <span class="glyphicon glyphicon-trash"></span>
                   <span class="hidden-xs hidden-sm">&nbsp;Eliminar</span>
                </a>
                {/if}
             </div>
        </div>
  
    <!-- PARA AGREGAR PESTAÑAS  -->
    <div class="row">
        <div class="col-sm-3 col-lg-2">
            <ul id="tabs_plan" class="nav nav-pills nav-stacked" role="tablist">
                <li role="presentation" class="active">
                    <a href="#general" aria-controls="general" role="tab" data-toggle="tab">
                        <span class="glyphicon glyphicon-dashboard"></span> &nbsp; Principal
                    </a>
                </li>                                           
            </ul>
        </div>
    
    <!-- CONTENEDOR DE LA CABECERA -->
 <div class="col-sm-9 col-lg-10">
  <div class="tab-content">  
   <div role="tabpanel" class="tab-pane active" id="general">
    <form id="f_plan" name="f_plan" action="{$fsc->url()}" method="post" class="form">
    <input type="hidden" name="petition_id" value="{$fsc->random_string()}"/>    
    <input type="hidden" name="redir"/>
    <input type="hidden" name="vmodifica1"/>
    <input type="hidden" name="vnumero" value="{$fsc->cheque->nrocheque}"/>
       <div class='panel panel-primary'>
           
            <div class="panel-heading">                                              
                 Carga de Datos 
            </div>
           <div class="panel-body">
               <div class="row">  
                    <div class="form-group">
                        <label for="vnro" class="col-sm-2 control-label">Nro. Cheque:</label>
                        <div class="col-sm-4">
                            <input class="form-control" type="text"  name="vnro" value="{$fsc->cheque->nrocheque}" autocomplete="off" disabled=""/>                 
                        </div>
                    </div>  
               </div>
               <div class="row"> 
                    <div class="form-group">                     
                        <label for="vbanco" class="col-sm-2 control-label">Banco:</label>
                        <div class="col-sm-4">
                            <select name="vbanco" class="form-control">
                            {loop="$fsc->banco->all()"}
                              {if="$fsc->cheque->idbanco==$value->idbanco"}
                              <option value="{$value->idbanco}" selected="">{$value->nombre}</option>
                              {else}
                              <option value="{$value->idbanco}">{$value->nombre}</option>
                              {/if}
                            {/loop}
                            </select>                                           
                         </div>
                    </div>
               </div>  
               <div class="row">
                    <div class="form-group">
                        <label for="vnrocuenta" class="col-sm-2 control-label">Nro. Cuenta:</label>
                        <div class="col-sm-3">
                            <input class="form-control" type="text"  name="vnrocuenta" value="{$fsc->cheque->nrocuenta}" autocomplete="off" required=""/>                 
                        </div>
                    </div>                   
                </div>
               <div class="row">                    
                   <div class="form-group">
                        <label for="fechaemision" class="col-sm-2 control-label">Fecha Emisión:</label>
                        <div class="col-sm-2">
                            <input type="hidden" name="vfechaemision" value="{$fsc->cheque->fec_emision}"/>                            
                            <input type="text" class="form-control datepicker"  name="fechaemision" value="{$fsc->cheque->fec_emision}" autocomplete="off" readonly=""/>                                             
                        </div>
                       
                    </div>
               </div>
               <div class="row"> 
                    <div class="form-group">                     
                        <label for="vcliente" class="col-sm-2 control-label">Cliente:</label>
                        <div class="col-sm-4">
                            <select name="vcliente" class="form-control">
                            {loop="$fsc->cliente->all()"}
                              {if="$fsc->cheque->idcliente==$value->idcliente"}
                              <option value="{$value->idcliente}" selected="">{$value->nombre}</option>
                              {else}
                              <option value="{$value->idcliente}">{$value->nombre}</option>
                              {/if}
                            {/loop}
                            </select>                                           
                         </div>
                    </div>
               </div>  
               <div class="row">
                   <div class="form-group">
                        <label for="vaordende" class="col-sm-2 control-label">A orden de:</label>
                        <div class="col-sm-6">
                            <input class="form-control" type="text"  name="vaordende" value="{$fsc->cheque->aordende}" autocomplete="off" />                 
                        </div>
                    </div>                                       
                </div>
                 
                <div class="row">                    
                    <div class="form-group">
                        <label for="vimporte" class="col-sm-2 control-label">Importe:</label>
                        <div class="col-sm-3">
                            <input class="form-control" type="text"  name="vimporte" value="{$fsc->cheque->importe}" autocomplete="off" required=""/>                 
                        </div>
                    </div>                                        
                </div>
               
               
               <div class="row">
                   <div class="form-group">
                        <label for="vtipo" class="col-sm-2 control-label">Tipo:</label>
                        <div class="col-sm-3">
                              <select name="vtipo" class="form-control">                                     
                                <option value="C"{if="$fsc->cheque->tipo=='C'"} selected=""{/if}>CHEQUE</option>
                                <option value="E"{if="$fsc->cheque->tipo=='E'"} selected=""{/if}>EFECTIVO</option>
                            </select>
                        </div>                        
                    </div>                                        
                </div>
                                      
                <div class="row">
                   <div class="form-group">
                        <label for="vfechapago" class="col-sm-2 control-label">Fecha Pago:</label>
                        <div class="col-sm-3">                            
                            <input class="form-control datepicker" type="text"  name="vfechapago" value="{$fsc->cheque->fec_pago}" />                 
                        </div>                        
                    </div>                                      
                </div>    
               
                                                            
           </div> 
           <!-- FIN DEL CUERPO DEL PANEL -->
            <div class="panel-footer text-right">
              <small class="pull-left">---</small>
              <button class="btn btn-sm btn-primary" type="submit" onclick="this.disabled=true;this.form.submit();">
                 <span class="glyphicon glyphicon-floppy-disk"></span>&nbsp; Guardar
              </button>
           </div>
           </div>
           </form>
        
     
       </div>                          
       </div>
      </div>
</div>
</div>




{else}
<div class="thumbnail">
   <img src="{#FS_PATH#}view/img/fuuu_face.png" alt="fuuuuu"/>
</div>
{/if}
{include="footer"}
